{"version":3,"file":"static/js/549.1c705f3c.chunk.js","mappings":"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","sources":["assets/svg/logo.svg","common/Logo.tsx","AppHeader.tsx","common/Video.tsx","common/VideoPreviewer.tsx","features/videoMeet/VideoMeetJoinVideoPreviewerBody.tsx","features/videoMeet/VideoMeetSettingsActionModal.tsx","features/videoMeet/VideoMeetJoinVideoPreviewerHeader.tsx","features/videoMeet/VideoMeetJoinVideoPreviewerFooter.tsx","features/videoMeet/VideoMeet.tsx","hooks/useDataRef.tsx","common/ErrorContent.tsx","common/LoadingContent.tsx","features/videoMeet/VideoMeetJoinForm.tsx","utils/GLobalUtils.tsx","hooks/usePlaySound.tsx","hooks/useExtendedState.tsx","hooks/useMeeting.tsx","common/ScreenRecorderContainer.tsx","features/videoMeet/VideoMeetJoin.tsx","features/videoMeet/VideoMeetCommon.tsx"],"sourcesContent":["var _path, _path2;\n\nvar _excluded = [\"title\", \"titleId\"];\n\nfunction _extends() { _extends = Object.assign ? Object.assign.bind() : function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport * as React from \"react\";\n\nfunction SvgLogo(_ref, svgRef) {\n  var title = _ref.title,\n      titleId = _ref.titleId,\n      props = _objectWithoutProperties(_ref, _excluded);\n\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    width: 97,\n    height: 18,\n    viewBox: \"0 0 97 18\",\n    fill: \"none\",\n    xmlns: \"http://www.w3.org/2000/svg\",\n    ref: svgRef,\n    \"aria-labelledby\": titleId\n  }, props), title ? /*#__PURE__*/React.createElement(\"title\", {\n    id: titleId\n  }, title) : null, _path || (_path = /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M0.161594 0.92H11.1776V3.704H3.35359V7.16H10.6016V9.92H3.35359V17H0.161594V0.92ZM17.1647 11.624C16.3647 11.624 15.7407 11.776 15.2927 12.08C14.8607 12.384 14.6447 12.8 14.6447 13.328C14.6447 13.824 14.8207 14.208 15.1727 14.48C15.5247 14.752 15.9567 14.888 16.4687 14.888C17.4767 14.888 18.2687 14.568 18.8447 13.928V11.888C18.4287 11.712 17.8687 11.624 17.1647 11.624ZM13.1807 8.384H12.9407V5.648C13.2607 5.44 13.8047 5.24 14.5727 5.048C15.3567 4.856 16.1327 4.76 16.9007 4.76C18.4527 4.76 19.6847 5.136 20.5967 5.888C21.5247 6.64 21.9887 7.696 21.9887 9.056V17H19.0127V16.088C18.7087 16.424 18.2607 16.72 17.6687 16.976C17.0767 17.216 16.4207 17.336 15.7007 17.336C14.5647 17.336 13.5887 17 12.7727 16.328C11.9727 15.64 11.5727 14.68 11.5727 13.448C11.5727 12.232 12.0687 11.256 13.0607 10.52C14.0527 9.784 15.2847 9.416 16.7567 9.416C17.5407 9.416 18.2367 9.536 18.8447 9.776V9.32C18.8447 8.04 18.0287 7.4 16.3967 7.4C15.7247 7.4 15.0927 7.496 14.5007 7.688C13.9247 7.88 13.4847 8.112 13.1807 8.384ZM31.8699 8.288H31.6299C31.3259 8.048 30.9019 7.84 30.3579 7.664C29.8139 7.472 29.2539 7.376 28.6779 7.376C27.6219 7.376 27.0939 7.68 27.0939 8.288C27.0939 8.496 27.1899 8.688 27.3819 8.864C27.5899 9.04 27.7659 9.16 27.9099 9.224C28.0699 9.288 28.3339 9.384 28.7019 9.512L30.1899 10.088C31.0379 10.424 31.6939 10.856 32.1579 11.384C32.6219 11.912 32.8539 12.672 32.8539 13.664C32.8539 14.736 32.4139 15.616 31.5339 16.304C30.6539 16.992 29.5019 17.336 28.0779 17.336C26.5419 17.336 25.2619 17.032 24.2379 16.424V13.664H24.4779C24.8459 13.952 25.3579 14.208 26.0139 14.432C26.6859 14.64 27.2939 14.744 27.8379 14.744C29.2139 14.744 29.9019 14.368 29.9019 13.616C29.9019 13.296 29.7899 13.04 29.5659 12.848C29.3419 12.64 28.9499 12.432 28.3899 12.224L26.9979 11.696C25.1099 10.976 24.1659 9.808 24.1659 8.192C24.1659 7.248 24.5659 6.44 25.3659 5.768C26.1819 5.096 27.2219 4.76 28.4859 4.76C29.8299 4.76 30.9579 5.056 31.8699 5.648V8.288ZM42.2578 7.592H39.3298V13.328C39.3298 13.856 39.4498 14.2 39.6898 14.36C39.9138 14.52 40.3298 14.6 40.9378 14.6C41.4018 14.6 41.7778 14.56 42.0658 14.48V17.096C41.5538 17.192 40.8338 17.24 39.9058 17.24C38.5138 17.24 37.5378 16.96 36.9778 16.4C36.6418 16.064 36.4258 15.688 36.3298 15.272C36.2338 14.856 36.1858 14.264 36.1858 13.496V7.592H33.6418V5.096H36.1858V1.976H39.3298V5.096H42.2578V7.592Z\",\n    fill: \"black\"\n  })), _path2 || (_path2 = /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M55.859 8.312L53.699 13.112H51.155C50.067 10.728 49.347 9.128 48.995 8.312C48.803 7.896 48.547 7.32 48.227 6.584C47.923 5.832 47.683 5.248 47.507 4.832H47.483C47.483 5.12 47.499 5.664 47.531 6.464C47.563 7.248 47.579 7.872 47.579 8.336V17H44.435V0.92H48.659L51.371 6.968C51.547 7.384 51.739 7.872 51.947 8.432C52.171 8.976 52.323 9.36 52.403 9.584H52.427C52.875 8.4 53.235 7.512 53.507 6.92L56.219 0.92H60.347V17H57.203V8.288C57.203 7.824 57.219 7.208 57.251 6.44C57.283 5.672 57.299 5.136 57.299 4.832H57.275C57.195 5.024 56.987 5.536 56.651 6.368C56.331 7.184 56.067 7.832 55.859 8.312ZM73.2069 16.208C72.1829 16.96 70.7189 17.336 68.8149 17.336C66.9109 17.336 65.3829 16.768 64.2309 15.632C63.0949 14.48 62.5269 12.984 62.5269 11.144C62.5269 9.32 63.0869 7.8 64.2069 6.584C65.3269 5.368 66.7429 4.76 68.4549 4.76C70.1829 4.76 71.5429 5.36 72.5349 6.56C73.5429 7.76 74.0469 9.36 74.0469 11.36C74.0469 11.44 74.0389 11.552 74.0229 11.696C74.0229 11.84 74.0229 11.936 74.0229 11.984C74.0069 12.048 73.9989 12.144 73.9989 12.272H65.5749C65.8789 13.888 67.0469 14.696 69.0789 14.696C70.6629 14.696 71.9589 14.296 72.9669 13.496H73.2069V16.208ZM65.5509 9.944H71.0469C71.0149 9.128 70.7669 8.48 70.3029 8C69.8389 7.52 69.2229 7.28 68.4549 7.28C67.7029 7.28 67.0469 7.52 66.4869 8C65.9429 8.464 65.6309 9.112 65.5509 9.944ZM85.91 16.208C84.886 16.96 83.422 17.336 81.518 17.336C79.614 17.336 78.086 16.768 76.934 15.632C75.798 14.48 75.23 12.984 75.23 11.144C75.23 9.32 75.79 7.8 76.91 6.584C78.03 5.368 79.446 4.76 81.158 4.76C82.886 4.76 84.246 5.36 85.238 6.56C86.246 7.76 86.75 9.36 86.75 11.36C86.75 11.44 86.742 11.552 86.726 11.696C86.726 11.84 86.726 11.936 86.726 11.984C86.71 12.048 86.702 12.144 86.702 12.272H78.278C78.582 13.888 79.75 14.696 81.782 14.696C83.366 14.696 84.662 14.296 85.67 13.496H85.91V16.208ZM78.254 9.944H83.75C83.718 9.128 83.47 8.48 83.006 8C82.542 7.52 81.926 7.28 81.158 7.28C80.406 7.28 79.75 7.52 79.19 8C78.646 8.464 78.334 9.112 78.254 9.944ZM96.1172 7.592H93.1892V13.328C93.1892 13.856 93.3092 14.2 93.5492 14.36C93.7732 14.52 94.1892 14.6 94.7972 14.6C95.2612 14.6 95.6372 14.56 95.9252 14.48V17.096C95.4132 17.192 94.6932 17.24 93.7652 17.24C92.3732 17.24 91.3972 16.96 90.8372 16.4C90.5012 16.064 90.2852 15.688 90.1892 15.272C90.0932 14.856 90.0452 14.264 90.0452 13.496V7.592H87.5012V5.096H90.0452V1.976H93.1892V5.096H96.1172V7.592Z\",\n    fill: \"#8C8C8C\"\n  })));\n}\n\nvar ForwardRef = /*#__PURE__*/React.forwardRef(SvgLogo);\nexport default __webpack_public_path__ + \"static/media/logo.c7b90f9b9aa3a0f5bc883b84796fc39c.svg\";\nexport { ForwardRef as ReactComponent };","import { ReactComponent as FastMeetSVG } from \"assets/svg/logo.svg\";\nimport React from \"react\";\n\nfunction Logo({ ...props }) {\n  return <FastMeetSVG {...props} />;\n}\n\nexport default Logo;\n","import React from \"react\";\nimport {\n  AppBar,\n  Icon,\n  IconButton,\n  Toolbar,\n  Container,\n  Tooltip,\n  Typography,\n} from \"@mui/material\";\nimport format from \"date-fns/format\";\n\nimport Logo from \"common/Logo\";\nimport { Link } from \"react-router-dom\";\nimport { RouteEnum } from \"constants/RouteConstants\";\n\nfunction AppHeader() {\n  return (\n    <AppBar color=\"transparent\" elevation={0}>\n      <Container maxWidth=\"xl\">\n        <Toolbar disableGutters>\n          <Link to={RouteEnum.HOME}>\n            <Logo />\n          </Link>\n\n          <div className=\"flex-1\" />\n          <Typography>{format(new Date(), \"p . E, LLL qo\")}</Typography>\n\n          <div className=\"flex items-center\">\n            <Tooltip title=\"Settings\">\n              <IconButton>\n                <Icon>settings</Icon>\n              </IconButton>\n            </Tooltip>\n          </div>\n        </Toolbar>\n      </Container>\n    </AppBar>\n  );\n}\n\nexport default AppHeader;\n","import { VideoHTMLAttributes, useEffect, useRef } from \"react\";\n\ntype PropsType = VideoHTMLAttributes<HTMLVideoElement> & {\n  srcObject?: any;\n  muted?: boolean;\n  peer?: any;\n};\n\nexport default function Video({ srcObject, muted, peer, ...props }: PropsType) {\n  const refVideo = useRef<HTMLVideoElement>(null);\n  useEffect(() => {\n    if (srcObject) {\n      if (!refVideo.current) return;\n      refVideo.current.srcObject = srcObject;\n      refVideo.current.autoplay = true;\n    }\n  }, [srcObject]);\n\n  useEffect(() => {\n    if (peer) {\n      peer.on(\"stream\", (stream: any) => {\n        if (!refVideo.current) return;\n        refVideo.current.srcObject = stream;\n        refVideo.current.autoplay = true;\n      });\n    }\n  }, [peer]);\n\n  return (\n    <video\n      playsInline\n      muted={muted}\n      autoPlay\n      ref={refVideo}\n      width={\"100%\"}\n      height={\"100%\"}\n      {...props}\n    />\n  );\n}\n","import Video from \"./Video\";\nimport \"./VideoPreviewer.css\";\n\ninterface VideoPreviewerProps {\n  pin: boolean;\n  name: string;\n  camera: boolean;\n  mic: boolean;\n  srcObject: MediaStream;\n  peer: any;\n  muted: boolean;\n  active: boolean;\n  avatar: string;\n  header: JSX.Element;\n  footer: JSX.Element;\n  body: JSX.Element;\n  [rest: string]: any;\n}\n\nexport default function VideoPreviewer(props: Partial<VideoPreviewerProps>) {\n  const {\n    pin,\n    name,\n    camera,\n    active,\n    mic,\n    srcObject,\n    peer,\n    avatar,\n    muted,\n    header,\n    footer,\n    body,\n    className,\n    ...rest\n  } = props;\n\n  return (\n    <div\n      {...rest}\n      className={`${className ? className : \"\"} ${\n        active ? \"vids-preview-active\" : \"\"\n      } vids-preview-container relative `}\n    >\n      <div className=\"absolute top-0 py-3 px-5  w-full\">{header}</div>\n      <div className=\"absolute top-0 bottom-0 px-5  left-0 right-0 m-auto py-5 flex justify-center items-center w-full\">\n        {body}\n      </div>\n\n      <div className=\"flex justify-center items-center h-full\">\n        <Video\n          style={{ display: `${camera ? \"block\" : \"none\"}` }}\n          srcObject={srcObject}\n          peer={peer}\n          muted={muted}\n        />\n        {!camera && name && (\n          <div className=\"vids-preview-avatar\">\n            <img className=\"w-full\" src={`${avatar || \"\"}`} alt={name} />\n          </div>\n        )}\n      </div>\n\n      <div className=\"absolute bottom-0 py-3 px-5  w-full\">{footer}</div>\n    </div>\n  );\n}\n","import { Icon, Typography } from \"@mui/material\";\nimport React from \"react\";\nimport { Icon as Iconify } from \"@iconify/react\";\n\nexport default function VideoMeetJoinVideoPreviewerBody({\n  streamError,\n}: {\n  streamError: string;\n}): JSX.Element {\n  return (\n    <>\n      {!!streamError && (\n        <div className=\"flex items-center flex-col\">\n          <Icon color=\"error\" sx={{ fontSize: \"100px\" }}>\n            <Iconify icon=\"fluent:error-circle-16-regular\" />\n          </Icon>\n          <Typography variant=\"h5\" color=\"error\">\n            {streamError}\n          </Typography>\n        </div>\n      )}\n    </>\n  );\n}\n","import {\n  Button,\n  Dialog,\n  DialogActions,\n  DialogContent,\n  DialogTitle,\n  MenuItem,\n  TextField,\n} from \"@mui/material\";\nimport React, { useEffect, useState } from \"react\";\n\ntype MediaInputType = { label: string; kind: string; id: string };\nexport default function VideoMeetSettingsActionModal({\n  open,\n  handleClose,\n  localMediaStream,\n}: {\n  open: boolean;\n  handleClose: () => void;\n  localMediaStream: MediaStream | undefined;\n}) {\n  const [audioInputSelect, setAudioInputSelect] = useState<MediaInputType[]>(\n    []\n  );\n  const [audioOutputSelect, setAudioOutputSelect] = useState<MediaInputType[]>(\n    []\n  );\n  const [videoSelect, setVideoSelect] = useState<MediaInputType[]>([]);\n\n  const addUpdateDevice = (\n    prev: MediaInputType[],\n    deviceInfo: MediaDeviceInfo\n  ) => {\n    const newDeviceInfo = [...prev];\n    const deviceIndex = newDeviceInfo.findIndex(\n      (device) => device.id === deviceInfo.deviceId\n    );\n    if (deviceIndex >= 0) {\n      newDeviceInfo[deviceIndex] = {\n        label: deviceInfo.label,\n        kind: deviceInfo.kind,\n        id: deviceInfo.deviceId,\n      };\n    } else {\n      newDeviceInfo.push({\n        label: deviceInfo.label,\n        kind: deviceInfo.kind,\n        id: deviceInfo.deviceId,\n      });\n    }\n    return newDeviceInfo;\n  };\n\n  function gotDevices(deviceInfos: MediaDeviceInfo[]) {\n    deviceInfos.forEach((deviceInfo: MediaDeviceInfo) => {\n      switch (deviceInfo.kind) {\n        case \"audioinput\":\n          setAudioInputSelect((prev) => {\n            return addUpdateDevice(prev, deviceInfo);\n          });\n          break;\n        case \"audiooutput\":\n          setAudioOutputSelect((prev) => {\n            return addUpdateDevice(prev, deviceInfo);\n          });\n          break;\n        case \"videoinput\":\n          setVideoSelect((prev) => {\n            return addUpdateDevice(prev, deviceInfo);\n          });\n          break;\n        default:\n          console.log(\"Some other kind of source/device: \", deviceInfo);\n          break;\n      }\n    });\n  }\n\n  useEffect(() => {\n    navigator?.mediaDevices\n      ?.enumerateDevices()\n      .then(gotDevices)\n      .catch((error) =>\n        console.log(\n          \"navigator.MediaDevices.getUserMedia error: \",\n          error.message,\n          error.name\n        )\n      );\n\n    // eslint-disable-next-line\n  }, []);\n\n  return (\n    <Dialog\n      open={open}\n      onClose={handleClose}\n      aria-labelledby=\"video-meet-settings-action-modal\"\n      aria-describedby=\"video-meet-settings-action-modal\"\n      maxWidth=\"sm\"\n      fullWidth\n    >\n      <DialogTitle>Settings</DialogTitle>\n      <DialogContent>\n        <TextField label=\"Audio Input\" className=\"mb-3 mt-2\" fullWidth select>\n          {audioInputSelect.map((audioInput, i) => (\n            <MenuItem key={i} value={audioInput.id}>\n              {audioInput.label}\n            </MenuItem>\n          ))}\n        </TextField>\n\n        <TextField label=\"Audio Output\" className=\"mb-3\" fullWidth select>\n          {audioOutputSelect.map((audioOutput, i) => (\n            <MenuItem key={i} value={audioOutput.id}>\n              {audioOutput.label}\n            </MenuItem>\n          ))}\n        </TextField>\n\n        <TextField label=\"Video Cam\" className=\"mb-3\" fullWidth select>\n          {videoSelect.map((videoInput, i) => (\n            <MenuItem key={i} value={videoInput.id}>\n              {videoInput.label}\n            </MenuItem>\n          ))}\n        </TextField>\n      </DialogContent>\n      <DialogActions>\n        <Button onClick={handleClose}>Cancel</Button>\n      </DialogActions>\n    </Dialog>\n  );\n}\n","import React, { useState } from \"react\";\nimport Popper from \"@mui/material/Popper\";\nimport PopupState, { bindToggle, bindPopper } from \"material-ui-popup-state\";\nimport Fade from \"@mui/material/Fade\";\nimport Paper from \"@mui/material/Paper\";\n\nimport { Icon as Iconify } from \"@iconify/react\";\nimport { Fab, Icon, MenuItem } from \"@mui/material\";\nimport VideoMeetSettingsActionModal from \"./VideoMeetSettingsActionModal\";\n\nexport default function VideoMeetJoinVideoPreviewerHeader({\n  localMediaStream,\n}: {\n  localMediaStream: MediaStream | undefined;\n}) {\n  const [openVideoSettings, setOpenVideoSettings] = useState(false);\n\n  const videoSettingsActions = [\n    {\n      title: \"Settings\",\n      action: () => setOpenVideoSettings(true),\n    },\n    {\n      title: \"Filter\",\n      action: () => console.log(\"testi\"),\n    },\n  ];\n\n  return (\n    <>\n      <div className=\"flex justify-end\">\n        <div>\n          <PopupState variant=\"popper\" popupId=\"demo-popup-popper\">\n            {(popupState) => (\n              <div>\n                <Fab\n                  variant=\"opaque\"\n                  color=\"primary\"\n                  {...bindToggle(popupState)}\n                >\n                  <Icon>\n                    <Iconify icon=\"bi:three-dots-vertical\" />\n                  </Icon>\n                </Fab>\n                <Popper\n                  {...bindPopper(popupState)}\n                  sx={{ zIndex: 100 }}\n                  transition\n                >\n                  {({ TransitionProps }) => (\n                    <Fade {...TransitionProps} timeout={350}>\n                      <Paper>\n                        {videoSettingsActions.map((setting, index) => (\n                          <MenuItem key={index} onClick={setting.action}>\n                            {setting.title}\n                          </MenuItem>\n                        ))}\n                      </Paper>\n                    </Fade>\n                  )}\n                </Popper>\n              </div>\n            )}\n          </PopupState>\n        </div>\n      </div>\n\n      {openVideoSettings && (\n        <VideoMeetSettingsActionModal\n          open={openVideoSettings}\n          handleClose={() => setOpenVideoSettings(false)}\n          localMediaStream={localMediaStream}\n        />\n      )}\n    </>\n  );\n}\n","import { Fab, Icon } from \"@mui/material\";\nimport React from \"react\";\nimport { Icon as Iconify } from \"@iconify/react\";\n\ntype Props = {\n  toggleCamera: () => void;\n  toggleAudio: () => void;\n  mic: boolean;\n  camera: boolean;\n};\n\nexport default function VideoMeetJoinVideoPreviewerFooter({\n  toggleCamera,\n  toggleAudio,\n  mic,\n  camera,\n}: Props) {\n  return (\n    <div className=\"flex justify-center gap-2\">\n      <Fab\n        variant=\"opaque\"\n        color={`${mic ? \"primary\" : \"error\"}`}\n        onClick={toggleAudio}\n      >\n        <Icon>\n          <Iconify\n            icon={`${mic ? \"carbon:microphone\" : \"carbon:microphone-off\"}`}\n          />\n        </Icon>\n      </Fab>\n\n      <Fab\n        variant=\"opaque\"\n        color={`${camera ? \"primary\" : \"error\"}`}\n        onClick={toggleCamera}\n      >\n        <Icon>\n          <Iconify\n            icon={`${camera ? \"bi:camera-video\" : \"bi:camera-video-off\"}`}\n          />\n        </Icon>\n      </Fab>\n    </div>\n  );\n}\n","import {\n  Fab,\n  Icon,\n  InputBase,\n  styled,\n  Tooltip,\n  Typography,\n} from \"@mui/material\";\nimport React, { KeyboardEvent, useMemo, useState } from \"react\";\nimport { Icon as Iconify } from \"@iconify/react\";\nimport { format } from \"date-fns\";\nimport { FormikProps } from \"formik\";\n\nimport VideoPreviewer from \"common/VideoPreviewer\";\nimport \"./VideoMeet.css\";\nimport ThemeConfig from \"configs/ThemeConfig\";\nimport { PeersType } from \"./VideoMeetType\";\n\nconst PreviewInput = styled(InputBase)(({ theme }) => ({\n  \"& .MuiInputBase-input\": {\n    position: \"relative\",\n    backgroundColor: \"transparent\",\n    border: \"none\",\n    width: \"auto\",\n    padding: \".2rem .5rem\",\n    color: \"white\",\n    fontSize: \"0.75rem\",\n  },\n}));\n\ninterface VideoMeetProps {\n  toggleCamera: () => void;\n  toggleAudio: () => void;\n  toggleRecordStream: () => void;\n  hangUp: () => void;\n  raiseHand: () => void;\n  toggleScreenSharing: () => void;\n  mic: boolean;\n  camera: boolean;\n  hand: boolean;\n  screenShare: boolean;\n  isScreenRecord: boolean;\n  localMediaStream: MediaStream | undefined;\n  peers: PeersType[];\n  formik: FormikProps<{\n    name: string;\n    gender: string;\n    meetId: string | undefined;\n  }>;\n  getAvatarQuery: any;\n  onInputName: (\n    e: React.ChangeEvent<HTMLInputElement>,\n    callback?: (value: string) => void\n  ) => void;\n}\n\ninterface MainActionProps {\n  title: string;\n  variant: \"circular\" | \"extended\" | \"opaque\";\n  color: \"error\" | \"primary\";\n  onClick: () => void;\n  size: \"small\" | \"medium\" | \"large\";\n  icon: string;\n}\n\nexport default function VideoMeet({\n  toggleCamera,\n  toggleAudio,\n  raiseHand,\n  hangUp,\n  toggleScreenSharing,\n  mic,\n  camera,\n  hand,\n  toggleRecordStream,\n  isScreenRecord,\n  screenShare,\n  localMediaStream,\n  peers,\n  formik,\n  getAvatarQuery,\n  onInputName,\n}: VideoMeetProps) {\n  const mainActions: MainActionProps[] = useMemo(\n    () => [\n      {\n        title: `${mic ? \"Off Mic\" : \"On Mic\"}`,\n        variant: \"opaque\",\n        color: `${mic ? \"primary\" : \"error\"}`,\n        onClick: toggleAudio,\n        size: \"small\",\n        icon: `${mic ? \"carbon:microphone\" : \"carbon:microphone-off\"}`,\n      },\n      {\n        title: `${camera ? \"Off Camera\" : \"On Camera\"}`,\n        variant: \"opaque\",\n        color: `${camera ? \"primary\" : \"error\"}`,\n        onClick: toggleCamera,\n        size: \"small\",\n        icon: `${camera ? \"bi:camera-video\" : \"bi:camera-video-off\"}`,\n      },\n      {\n        title: `${hand ? \"End Raise Hand\" : \"Raise Hand\"}`,\n        variant: \"opaque\",\n        color: \"primary\",\n        onClick: raiseHand,\n        size: \"small\",\n        icon: \"emojione-monotone:hand-with-fingers-splayed\",\n      },\n      {\n        title: \"Share Screen\",\n        variant: \"opaque\",\n        color: \"primary\",\n        onClick: toggleScreenSharing,\n        size: \"small\",\n        icon: \"fluent:share-screen-start-24-regular\",\n      },\n      {\n        title: `${isScreenRecord ? \"End Record\" : \"Record\"}`,\n        variant: \"opaque\",\n        color: `${isScreenRecord ? \"error\" : \"primary\"}`,\n        onClick: toggleRecordStream,\n        size: \"small\",\n        icon: \"mdi:record-circle-outline\",\n      },\n      {\n        title: \"End Call\",\n        variant: \"opaque\",\n        color: \"error\",\n        onClick: hangUp,\n        size: \"small\",\n        icon: \"simple-line-icons:call-end\",\n      },\n      // {\n      //   title: \"Layout\",\n      //   variant: \"opaque\",\n      //   color: \"primary\",\n      //   onClick: hangUp,\n      //   size: \"medium\",\n      //   icon: \"tabler:layout-grid\",\n      // },\n    ],\n    // eslint-disable-next-line\n    [camera, mic, isScreenRecord, hand]\n  );\n\n  const onChangePreviewName = (e: React.ChangeEvent<HTMLInputElement>) => {\n    onInputName(e, (value) => {\n      formik.setFieldValue(\"name\", value);\n    });\n  };\n\n  return (\n    <div className=\"bg-[#000000] overflow-y-hidden h-screen max-h-screen min-h-[500px]\">\n      <main className=\"overflow-y-scroll\">\n        <div className=\"h-[calc(100vh-80px)] pt-5 px-3\">\n          {peers.length >= 1 ? (\n            <div className=\"layout-grid-auto h-full\">\n              <VideoPreviewer\n                camera={camera}\n                mic={mic}\n                muted={false}\n                active={true}\n                name={formik.values.name}\n                avatar={getAvatarQuery.data.data}\n                srcObject={localMediaStream}\n                header={\n                  <div>\n                    <Icon\n                      style={{ color: `${ThemeConfig.palette.common.white}` }}\n                    >\n                      <Iconify\n                        icon={`${\n                          mic\n                            ? \"clarity:microphone-solid\"\n                            : \"clarity:microphone-mute-solid\"\n                        }`}\n                      />\n                    </Icon>\n                  </div>\n                }\n                footer={\n                  <div className=\"flex gap-2\">\n                    {hand && (\n                      <Tooltip title=\"Hand Raised\" placement=\"top\">\n                        <Icon className=\"wave-hand\">\n                          <Iconify\n                            icon={`emojione:waving-hand-medium-dark-skin-tone`}\n                          />\n                        </Icon>\n                      </Tooltip>\n                    )}\n                    <PreviewInput\n                      value={formik.values.name || \"\"}\n                      onChange={onChangePreviewName}\n                    />\n                  </div>\n                }\n              />\n              {peers?.map((peer: PeersType, index: number) => (\n                <VideoPreviewer\n                  key={index}\n                  camera={peer.userObj.peer_video}\n                  mic={peer.userObj.peer_audio}\n                  muted={false}\n                  active={false}\n                  avatar={peer.userObj.avatar}\n                  peer={peer.peerObj}\n                  name={peer.userObj.peer_name}\n                  header={\n                    <div>\n                      <Icon\n                        style={{\n                          color: `${ThemeConfig.palette.common.white}`,\n                        }}\n                      >\n                        <Iconify\n                          icon={`${\n                            peer.userObj.peer_audio\n                              ? \"clarity:microphone-solid\"\n                              : \"clarity:microphone-mute-solid\"\n                          }`}\n                        />\n                      </Icon>\n                    </div>\n                  }\n                  footer={\n                    <div className=\"flex gap-2\">\n                      {peer.userObj.peer_raised_hand && (\n                        <Tooltip title=\"Hand Raised\" placement=\"top\">\n                          <Icon className=\"wave-hand\">\n                            <Iconify\n                              icon={`emojione:waving-hand-medium-dark-skin-tone`}\n                            />\n                          </Icon>\n                        </Tooltip>\n                      )}\n                      <Typography\n                        className=\"vids-preview-title\"\n                        color={\"white\"}\n                        variant=\"subtitle2\"\n                      >\n                        {peer.userObj.peer_name}\n                      </Typography>\n                    </div>\n                  }\n                />\n              ))}\n            </div>\n          ) : (\n            <VideoPreviewer\n              className=\"h-[calc(100vh-100px)]\"\n              camera={camera}\n              mic={mic}\n              muted={false}\n              active={true}\n              name={formik.values.name}\n              avatar={getAvatarQuery.data.data}\n              srcObject={localMediaStream}\n              header={\n                <div>\n                  <Icon\n                    style={{ color: `${ThemeConfig.palette.common.white}` }}\n                  >\n                    <Iconify\n                      icon={`${\n                        mic\n                          ? \"clarity:microphone-solid\"\n                          : \"clarity:microphone-mute-solid\"\n                      }`}\n                    />\n                  </Icon>\n                </div>\n              }\n              footer={\n                <div className=\"flex gap-2\">\n                  {hand && (\n                    <Tooltip title=\"Hand Raised\" placement=\"top\">\n                      <Icon className=\"wave-hand\">\n                        <Iconify\n                          icon={`emojione:waving-hand-medium-dark-skin-tone`}\n                        />\n                      </Icon>\n                    </Tooltip>\n                  )}\n                  <PreviewInput\n                    value={formik.values.name || \"\"}\n                    onChange={onChangePreviewName}\n                  />\n                </div>\n              }\n            />\n          )}\n        </div>\n      </main>\n\n      <footer className=\"flex justify-between gap-2 items-center my-3 mx-3\">\n        <div className=\"flex item-center\">\n          <Typography color=\"white\" variant=\"subtitle1\" fontWeight={500}>\n            {format(new Date(), \"p\")} | Fast Meet\n          </Typography>\n        </div>\n        <div className=\"flex gap-2\">\n          {mainActions.map((action: MainActionProps, i: number) => (\n            <Tooltip key={i} title={action.title}>\n              <Fab\n                variant={action.variant}\n                color={action.color}\n                onClick={action.onClick}\n                size={action.size}\n              >\n                <Icon>\n                  <Iconify icon={action.icon} />\n                </Icon>\n              </Fab>\n            </Tooltip>\n          ))}\n        </div>\n        <div></div>\n      </footer>\n    </div>\n  );\n}\n","import { useRef } from \"react\";\n\n/**\n * @template T\n * @param {T} data\n */\nfunction useDataRef<T = any>(data: any) {\n  const ref = useRef<T>(data);\n  ref.current = data;\n  return ref;\n}\n\nexport default useDataRef;\n","import React from \"react\";\nimport { Typography, Icon } from \"@mui/material\";\nimport clsx from \"clsx\";\n\ninterface ErrorContentType {\n  title: string;\n  description: string;\n  className?: string;\n  onTryAgain?: () => void;\n}\n\n/**\n *\n * @param {ErrorContentProps} props\n */\n\nfunction ErrorContent(props: ErrorContentType): JSX.Element {\n  const { title, description, className, onTryAgain, ...rest } = props;\n\n  return (\n    <div\n      className={clsx(\n        \"p-8 flex flex-col justify-center items-center\",\n        className\n      )}\n      {...rest}\n    >\n      <Typography variant=\"h6\" className=\"font-bold text-center\">\n        {title}\n      </Typography>\n      <div>\n        <Icon className=\"text-error-main\" style={{ fontSize: \"100px\" }}>\n          sentiment_dissatisfied\n        </Icon>\n      </div>\n      <Typography variant=\"body2\" className=\"text-center mb-4 font-bold\">\n        {description}\n      </Typography>\n    </div>\n  );\n}\n\nErrorContent.defaultProps = {\n  title: \"Something went wrong\",\n  description: \"We're quite sorry about this!\",\n};\n\nexport default ErrorContent;\n\n/**\n * @typedef {{\n * onTryAgain: Function\n * } & import(\"@mui/material\").PaperProps} ErrorContentProps\n */\n","import React, { FC, ReactNode, useEffect } from \"react\";\nimport useDataRef from \"hooks/useDataRef\";\nimport LoadingIndicator from \"./LoadingIndicator\";\nimport ErrorContent from \"common/ErrorContent\";\nimport clsx from \"clsx\";\n\ninterface LoadingContentType {\n  size: number;\n  error: boolean;\n  loading: boolean;\n  children: JSX.Element | (() => JSX.Element);\n  onReload: () => void;\n  onMount: () => void;\n  loadingContent: JSX.Element | ((x: JSX.Element) => ReactNode);\n  errorContent: JSX.Element | ((x: JSX.Element) => ReactNode);\n  className: string;\n}\n/**\n *\n * @param {LoadingContentProps} props\n */\nfunction LoadingContent(props: Partial<LoadingContentType>): JSX.Element {\n  const {\n    size,\n    error,\n    loading,\n    children,\n    onReload,\n    onMount,\n    loadingContent,\n    errorContent,\n    className,\n    ...rest\n  } = props;\n\n  const dataRef = useDataRef({ onReload, onMount });\n\n  useEffect(() => {\n    dataRef.current.onMount?.();\n  }, [dataRef]);\n\n  if (!loading && !error) {\n    if (children !== undefined) {\n      return typeof children === \"function\" ? children() : children;\n    }\n  }\n\n  const defaultLoadingContent = <LoadingIndicator size={size} />;\n\n  const defaultErrorContent = <ErrorContent onTryAgain={() => onReload?.()} />;\n\n  return (\n    <div\n      className={clsx(\n        \"flex flex-col justify-center items-center p-4\",\n        className\n      )}\n      {...rest}\n    >\n      {error ? (\n        <>\n          {errorContent\n            ? typeof errorContent === \"function\"\n              ? errorContent(defaultErrorContent)\n              : errorContent\n            : defaultErrorContent}\n        </>\n      ) : loadingContent ? (\n        typeof loadingContent === \"function\" ? (\n          loadingContent(defaultLoadingContent)\n        ) : (\n          loadingContent\n        )\n      ) : (\n        defaultLoadingContent\n      )}\n    </div>\n  );\n}\n\nLoadingContent.defaultProps = {\n  size: 40,\n  children: null,\n};\n\nexport default LoadingContent;\n\n/**\n * @typedef {{\n * size: string | number,\n * onMount: Function,\n * onReload: Function,\n * error: boolean,\n * loading: boolean,\n * errorContent: React.ReactNode,\n * loadingContent: React.ReactNode,\n * } & React.ComponentPropsWithoutRef<'div'>} LoadingContentProps\n */\n","import React from \"react\";\nimport {\n  Button,\n  FormControlLabel,\n  Radio,\n  RadioGroup,\n  TextField,\n} from \"@mui/material\";\nimport { FormikProps } from \"formik\";\n\ninterface VideoMeetJoinFormProps {\n  formik: FormikProps<{\n    name: string;\n    gender: string;\n    meetId: string | undefined;\n  }>;\n}\n\nexport default function VideoMeetJoinForm({ formik }: VideoMeetJoinFormProps) {\n  return (\n    <form\n      onSubmit={formik.handleSubmit}\n      className=\"flex flex-col  items-center w-full justify-around h-full\"\n    >\n      <div className=\"w-full\">\n        <TextField\n          label=\"Name\"\n          placeholder=\"Sylvernus Akubo\"\n          fullWidth\n          {...formik.getFieldProps(\"name\")}\n          error={formik.touched.name && Boolean(formik.errors.name)}\n          helperText={formik.touched.name && formik.errors.name}\n        />\n        <RadioGroup\n          aria-label=\"gender\"\n          row\n          {...formik.getFieldProps(\"gender\")}\n          className=\"flex justify-center\"\n        >\n          <FormControlLabel value=\"female\" control={<Radio />} label=\"Female\" />\n          <FormControlLabel value=\"male\" control={<Radio />} label=\"Male\" />\n        </RadioGroup>\n      </div>\n\n      <Button size=\"large\" fullWidth type=\"submit\" className=\"mt-10\">\n        Join Meeting\n      </Button>\n    </form>\n  );\n}\n","/**\n * A caller function to callback other function with args\n * @param {Function} callBack\n * @param {rest} args\n */\nexport function callerFn<T>(callBack: (args: T) => void, args: T) {\n  callBack(args);\n}\n\n/**\n * Generate pronoun from gender\n * @param {\"male\" | \"female\"} gender\n * @returns\n */\nexport function genderToPronoun(gender: \"male\" | \"female\") {\n  switch (gender) {\n    case \"male\":\n      return \"His\";\n    case \"female\":\n      return \"Her\";\n  }\n  return;\n}\n\n/**\n * Get MediaRecorder MimeTypes\n * @returns {boolean} is mimeType supported by media recorder\n */\nexport function getSupportedMimeTypes() {\n  const possibleTypes = [\n    \"video/webm;codecs=vp9,opus\",\n    \"video/webm;codecs=vp8,opus\",\n    \"video/webm;codecs=h264,opus\",\n    \"video/mp4;codecs=h264,aac\",\n    \"video/mp4\",\n  ];\n  return possibleTypes.filter((mimeType) => {\n    return MediaRecorder.isTypeSupported(mimeType);\n  });\n}\n\n/**\n * Date Format: https://convertio.co/it/\n * @returns {string} date string format: DD-MM-YYYY-H_M_S\n */\nexport function getDataTimeString() {\n  const d = new Date();\n  const date = d.toISOString().split(\"T\")[0];\n  const time = d.toTimeString().split(\" \")[0];\n  return `${date}-${time}`;\n}\n\n/**\n * Convert bytes to KB-MB-GB-TB\n * @param {object} bytes to convert\n * @returns {string} converted size\n */\n// export function bytesToSize(bytes: number) {\n//   let sizes = [\"Bytes\", \"KB\", \"MB\", \"GB\", \"TB\"];\n//   if (bytes == 0) return \"0 Byte\";\n//   let i = parseInt(Math.floor(Math.log(bytes) / Math.log(1024)));\n//   return Math.round(bytes / Math.pow(1024, i), 2) + \" \" + sizes[i];\n// }\n\n/**\n * Save to PC / Mobile devices\n * https://developer.mozilla.org/en-US/docs/Web/API/Blob\n * @param {object} blob content\n * @param {string} file to save\n */\nexport function saveBlobToFile(blob: Blob, file: any) {\n  const url = window.URL.createObjectURL(blob);\n  const a = document.createElement(\"a\");\n  a.style.display = \"none\";\n  a.href = url;\n  a.download = file;\n  document.body.appendChild(a);\n  a.click();\n  setTimeout(() => {\n    document.body.removeChild(a);\n    window.URL.revokeObjectURL(url);\n  }, 100);\n}\n","import React from \"react\";\nimport { BASE_URL } from \"utils/VideoUtils\";\n\n/**\n * PlaySound from server\n * @param {string} name\n * @returns HTMLAudioElement\n */\nexport default function usePlaySound(\n  name:\n    | \"addPeer\"\n    | \"alert\"\n    | \"chatMessage\"\n    | \"delete\"\n    | \"download\"\n    | \"eject\"\n    | \"locked\"\n    | \"newMessage\"\n    | \"off\"\n    | \"ok\"\n    | \"on\"\n    | \"raiseHand\"\n    | \"recStart\"\n    | \"recStop\"\n    | \"removePeer\"\n    | \"snapShot\"\n    | \"speech\"\n    | \"onlyParticipant\"\n): HTMLAudioElement {\n  const [audio] = React.useState<HTMLAudioElement>(\n    new Audio(`${BASE_URL}/sounds/${name}.mp3`)\n  );\n\n  return audio;\n}\n","import React, { Dispatch, SetStateAction } from \"react\";\n\nexport default function useExtendedState<T>(\n  initialState?: any\n): [T, Dispatch<SetStateAction<T>>, () => Promise<T>] {\n  const [state, setState] = React.useState<T>(initialState && initialState);\n  const getLatestState = () => {\n    return new Promise<T>((resolve, reject) => {\n      setState((s) => {\n        resolve(s);\n        return s;\n      });\n    });\n  };\n\n  return [state, setState, getLatestState];\n}\n","import { Icon } from \"@mui/material\";\nimport { GlobalInitialStateType, UseQueryStateResult } from \"common/GlobalType\";\nimport ThemeConfig from \"configs/ThemeConfig\";\nimport {\n  PeerActionStatusConfig,\n  PeersType,\n} from \"features/videoMeet/VideoMeetType\";\nimport React, { Dispatch, SetStateAction, useEffect, useState } from \"react\";\nimport { useSelector, useDispatch } from \"react-redux\";\nimport {\n  addPeerAction,\n  editPeerAction,\n  removePeerAction,\n  toggleCameraAction,\n  toggleMicAction,\n} from \"store/StoreSlice\";\nimport { initEnumerateDevices, socket } from \"utils/VideoUtils\";\nimport { Icon as Iconify } from \"@iconify/react\";\nimport { useSnackbar } from \"notistack\";\nimport usePlaySound from \"./usePlaySound\";\nimport escape from \"lodash/escape\";\nimport fastmeetApi from \"store/StoreQuerySlice\";\nimport useExtendedState from \"./useExtendedState\";\nimport {\n  getDataTimeString,\n  getSupportedMimeTypes,\n  saveBlobToFile,\n} from \"utils/GLobalUtils\";\n\nfunction useMeeting(\n  meetId: string | undefined,\n  { canJoinMeeting }: { canJoinMeeting?: boolean }\n): GlobalInitialStateType & {\n  streamError: string;\n  toggleMic: (callback?: (mic: boolean) => void) => void;\n  toggleCamera: (callback?: (camera: boolean) => void) => void;\n  hangUp: () => void;\n  raiseHand: () => void;\n  isScreenRecord: boolean;\n  onInputChangeName: (\n    e: React.ChangeEvent<HTMLInputElement>,\n    callback?: (value: string) => void\n  ) => void;\n  addPeer: (peer: PeersType) => void;\n  editPeer: (peer: PeersType) => void;\n  deletePeer: (peer: PeersType) => void;\n  setStreamError: Function;\n  iceServers: RTCIceServer[];\n  peers: PeersType[];\n  setPeers: Dispatch<SetStateAction<PeersType[]>>;\n  getTurnServerQuery: UseQueryStateResult<{ data: { [key: string]: string } }>;\n  toggleScreenSharing: () => void;\n  toggleRecordStream: () => void;\n} {\n  const globalState: GlobalInitialStateType = useSelector(\n    (state: any) => state.global\n  );\n\n  const { enqueueSnackbar } = useSnackbar();\n  const dispatch = useDispatch();\n  const [peers, setPeers] = useState<PeersType[]>([]);\n  const [streamError, setStreamError] = useState<string>(\"\");\n\n  const [localMediaStream, setLocalMediaStream] =\n    useExtendedState<MediaStream>();\n  const [handRaised, setHandRaised] = useExtendedState<boolean>(false);\n  const [screenShare, setScreenShare, getScreenShare] =\n    useExtendedState<boolean>(false);\n  const [mediaRecorder, setMediaRecorder, getMediaRecorder] =\n    useExtendedState<MediaRecorder>();\n  const [isScreenRecord, setIsScreenRecord, getIsScreenRecord] =\n    useExtendedState<boolean>(false);\n  const [recordedBlobs, setRecordedBlobs, getRecordedBlobs] =\n    useExtendedState<any>([]);\n\n  const camera = globalState.camera;\n  const mic = globalState.mic;\n  let isMobileDevice = false;\n\n  const iceServers = globalState.iceServers;\n\n  const raisedHandSound = usePlaySound(\"raiseHand\");\n  const screenRecStartSound = usePlaySound(\"recStart\");\n  const screenRecStopSound = usePlaySound(\"recStop\");\n\n  //   console.log(\n  //     \"localMediaStream?.getAudioTracks()\",\n  //     localMediaStream?.getAudioTracks()[0]\n  //   );\n\n  const getTurnServerQuery = fastmeetApi.useGetTurnServerQuery({});\n\n  useEffect(() => {\n    if (!!iceServers) {\n      initEnumerateDevices(\n        setStreamError,\n        (stream) => {\n          setLocalMediaStream(stream);\n          dispatch(toggleCameraAction(true));\n          dispatch(toggleMicAction(true));\n        },\n        (err) => {\n          dispatch(toggleCameraAction(false));\n          dispatch(toggleMicAction(false));\n        }\n      );\n    }\n  }, [iceServers]);\n\n  async function toggleCamera(callback?: (camera: boolean) => void) {\n    // https://developer.mozilla.org/en-US/docs/Web/API/MediaStream/getVideoTracks\n    if (localMediaStream !== undefined) {\n      localMediaStream.getVideoTracks()[0].enabled =\n        !localMediaStream.getVideoTracks()[0].enabled;\n      console.log(\n        \"localMediaStream.getVideoTracks()[0].enabled\",\n        localMediaStream.getVideoTracks()[0].enabled\n      );\n      dispatch(\n        toggleCameraAction(!!localMediaStream.getVideoTracks()[0].enabled)\n      );\n      if (canJoinMeeting) {\n        socket.emit(\"peerActionStatus\", {\n          room_id: meetId,\n          socket_id: socket.id,\n          element: \"video\",\n          status: !!localMediaStream.getVideoTracks()[0].enabled,\n        } as PeerActionStatusConfig);\n        enqueueSnackbar(\n          <>\n            <Icon style={{ color: `${ThemeConfig.palette.common.white}` }}>\n              <Iconify\n                icon={`${\n                  camera\n                    ? \"heroicons:video-camera-solid\"\n                    : \"heroicons:video-camera-slash-solid\"\n                }`}\n              />\n            </Icon>{\" \"}\n            {camera ? \"Camera turned on\" : \"Camera turned off\"}\n          </>,\n          {\n            anchorOrigin: {\n              vertical: \"top\",\n              horizontal: \"right\",\n            },\n          }\n        );\n      }\n\n      if (callback && typeof callback === \"function\")\n        callback(!!localMediaStream.getVideoTracks()[0].enabled);\n    }\n  }\n\n  async function toggleMic(callback?: (mic: boolean) => void) {\n    // https://developer.mozilla.org/en-US/docs/Web/API/MediaStream/getAudioTracks\n    if (localMediaStream !== undefined) {\n      localMediaStream.getAudioTracks()[0].enabled =\n        !localMediaStream.getAudioTracks()[0].enabled;\n      dispatch(toggleMicAction(!!localMediaStream.getAudioTracks()[0].enabled));\n      if (canJoinMeeting) {\n        socket.emit(\"peerActionStatus\", {\n          room_id: meetId,\n          socket_id: socket.id,\n          element: \"audio\",\n          status: !!localMediaStream.getAudioTracks()[0].enabled,\n        } as PeerActionStatusConfig);\n\n        enqueueSnackbar(\n          <>\n            <Icon style={{ color: `${ThemeConfig.palette.common.white}` }}>\n              <Iconify\n                icon={`${\n                  mic\n                    ? \"clarity:microphone-solid\"\n                    : \"clarity:microphone-mute-solid\"\n                }`}\n              />\n            </Icon>\n            {mic ? \"Microphone turned on\" : \"Microphone turned off\"}\n          </>,\n          {\n            anchorOrigin: {\n              vertical: \"top\",\n              horizontal: \"right\",\n            },\n          }\n        );\n      }\n      if (callback && typeof callback === \"function\")\n        callback(!!localMediaStream.getAudioTracks()[0].enabled);\n    }\n  }\n\n  /**\n   * Stop recording\n   */\n  function stopStreamRecording() {\n    getMediaRecorder().then((mediaRecorder) => {\n      mediaRecorder.stop();\n    });\n  }\n\n  /**\n   * Download recorded stream\n   */\n  function downloadRecordedStream() {\n    try {\n      getRecordedBlobs().then((recordedBlobs) => {\n        if (recordedBlobs === undefined) return;\n        const type = recordedBlobs[0].type.includes(\"mp4\") ? \"mp4\" : \"webm\";\n        const blob = new Blob(recordedBlobs, { type: \"video/\" + type });\n        const recFileName = getDataTimeString() + \"-REC.\" + type;\n        const currentDevice = isMobileDevice ? \"MOBILE\" : \"PC\";\n        console.log(\n          `Please wait to be processed, then will be downloaded to your ${currentDevice} device`\n        );\n\n        saveBlobToFile(blob, recFileName);\n      });\n    } catch (err) {\n      console.log(\"error\", \"Recording save failed: \" + err);\n    }\n  }\n  /**\n   * Handle Media Recorder onstop event\n   * @param {object} event of media recorder\n   */\n  function handleMediaRecorderStop(event: any) {\n    screenRecStopSound.play();\n    console.log(\"MediaRecorder stopped: \", event);\n    setIsScreenRecord(false);\n    socket.emit(\"peerActionStatus\", {\n      room_id: meetId,\n      socket_id: socket.id,\n      element: \"rec\",\n      status: false,\n    } as PeerActionStatusConfig);\n    downloadRecordedStream();\n  }\n\n  /**\n   * Handle Media Recorder ondata event\n   * @param {object} event of media recorder\n   */\n  function handleMediaRecorderData(event: any) {\n    console.log(\"MediaRecorder data: \", event);\n    if (event.data && event.data.size > 0)\n      setRecordedBlobs((prevRecordedBlobs: any) => {\n        return [...prevRecordedBlobs, event.data];\n      });\n  }\n\n  /**\n   * Handle Media Recorder\n   * @param {object} mediaRecorder\n   */\n  function handleMediaRecorder() {\n    getMediaRecorder().then((mediaRecorder) => {\n      console.log(\"mediaRecorder\", mediaRecorder);\n      screenRecStartSound.play();\n      mediaRecorder.start();\n      mediaRecorder.addEventListener(\"dataavailable\", handleMediaRecorderData);\n      mediaRecorder.addEventListener(\"stop\", handleMediaRecorderStop);\n    });\n  }\n\n  /**\n   * Start Recording\n   * https://github.com/webrtc/samples/tree/gh-pages/src/content/getusermedia/record\n   * https://developer.mozilla.org/en-US/docs/Web/API/MediaRecorder\n   * https://developer.mozilla.org/en-US/docs/Web/API/MediaStream\n   */\n  function startStreamRecording() {\n    setRecordedBlobs([]);\n\n    let mimeoptions = getSupportedMimeTypes();\n    console.log(\"MediaRecorder options supported\", mimeoptions);\n    let options = { mimeType: mimeoptions?.[0] }; // select the first available as mimeType\n\n    try {\n      if (isMobileDevice) {\n        // on mobile devices recording camera + audio\n        setMediaRecorder(new MediaRecorder(localMediaStream, options));\n        setIsScreenRecord(true);\n        handleMediaRecorder();\n        socket.emit(\"peerActionStatus\", {\n          room_id: meetId,\n          socket_id: socket.id,\n          element: \"rec\",\n          status: true,\n        } as PeerActionStatusConfig);\n      } else {\n        // on desktop devices recording screen + audio\n        // screenMaxFrameRate = parseInt(screenFpsSelect.value);\n        const constraints = {\n          // video: { frameRate: { max: screenMaxFrameRate } },\n          video: true,\n        };\n        let recScreenStreamPromise =\n          navigator.mediaDevices.getDisplayMedia(constraints);\n        recScreenStreamPromise\n          .then((screenStream) => {\n            const newStream = new MediaStream([\n              screenStream.getVideoTracks()[0],\n              localMediaStream.getAudioTracks()[0],\n            ]);\n            setMediaRecorder(new MediaRecorder(newStream, options));\n            setIsScreenRecord(true);\n            handleMediaRecorder();\n            socket.emit(\"peerActionStatus\", {\n              room_id: meetId,\n              socket_id: socket.id,\n              element: \"rec\",\n              status: true,\n            } as PeerActionStatusConfig);\n          })\n          .catch((err) => {\n            console.error(\n              \"[Error] Unable to recording the screen + audio\",\n              err\n            );\n          });\n      }\n    } catch (err) {\n      console.error(\"Exception while creating MediaRecorder: \", err);\n    }\n  }\n\n  /**\n   * Start - Stop Stream recording\n   */\n  function toggleRecordStream() {\n    getIsScreenRecord().then((isStreamRecording) => {\n      if (isStreamRecording) {\n        stopStreamRecording();\n      } else {\n        startStreamRecording();\n      }\n    });\n  }\n\n  /**\n   * Refresh my local stream\n   * @param {object} stream media stream audio - video\n   * @param {boolean} localAudioTrackChange default false\n   */\n  async function refreshMyLocalStream(\n    stream: MediaStream,\n    localAudioTrackChange = false\n  ) {\n    if (localMediaStream === undefined) return;\n\n    if (screenShare) stream.getVideoTracks()[0].enabled = true;\n\n    let newStream = null;\n\n    // https://developer.mozilla.org/en-US/docs/Web/API/MediaStream\n    if (!screenShare) {\n      console.log(\"Refresh my local media stream VIDEO - AUDIO\");\n      newStream = new MediaStream([\n        stream.getVideoTracks()[0],\n        localAudioTrackChange\n          ? stream.getAudioTracks()[0]\n          : localMediaStream.getAudioTracks()[0],\n      ]);\n    } else {\n      console.log(\"Refresh my local media stream AUDIO\");\n      newStream = new MediaStream([\n        localAudioTrackChange\n          ? stream.getAudioTracks()[0]\n          : localMediaStream.getAudioTracks()[0],\n      ]);\n    }\n    setLocalMediaStream(newStream);\n\n    getScreenShare().then((isScreenShare) => {\n      if (!isScreenShare) {\n        stream.getVideoTracks()[0].onended = () => {\n          toggleScreenSharing();\n        };\n        localMediaStream.getVideoTracks()[0].enabled = false;\n      }\n    });\n  }\n\n  /**\n   * Replace Video Tracks\n   * @param {object} stream media stream audio - video\n   * @param {object} recipientPeer\n   */\n  function replaceVideoTrack(stream: MediaStream, recipientPeer: any) {\n    recipientPeer.replaceTrack(\n      recipientPeer.streams[0].getVideoTracks()[0],\n      stream.getVideoTracks()[0],\n      recipientPeer.streams[0]\n    );\n  }\n\n  /**\n   * Enable - disable screen sharing\n   * https://developer.mozilla.org/en-US/docs/Web/API/MediaDevices/getDisplayMedia\n   */\n  async function toggleScreenSharing() {\n    getScreenShare().then(async (isScreenShare) => {\n      const constraints = {\n        // audio: true, // enable tab audio\n        audio: {\n          echoCancellation: true,\n          noiseSuppression: true,\n          sampleRate: 44100,\n          cursor: \"always\",\n        },\n        //   video: { frameRate: { max: screenMaxFrameRate } },\n        video: true,\n      };\n\n      let screenMediaPromise: MediaStream;\n\n      try {\n        if (isScreenShare === false) {\n          // on screen sharing start\n          console.log(\"on screen sharing start\");\n          screenMediaPromise = await navigator.mediaDevices.getDisplayMedia(\n            constraints\n          );\n        } else {\n          // on screen sharing stop\n          console.log(\"on screen sharing stop\");\n          screenMediaPromise = await navigator.mediaDevices.getUserMedia({\n            audio: true,\n            video: true,\n          });\n        }\n        if (screenMediaPromise) {\n          console.log(\"call refresh localstream\");\n          await refreshMyLocalStream(screenMediaPromise);\n          setPeers((peers) => {\n            let newPeers = [...peers];\n            newPeers.forEach((peer) =>\n              replaceVideoTrack(screenMediaPromise, peer.peerObj)\n            );\n            return newPeers;\n          });\n\n          socket.emit(\"peerActionStatus\", {\n            room_id: meetId,\n            socket_id: socket.id,\n            element: \"screen\",\n            status: !isScreenShare,\n          } as PeerActionStatusConfig);\n        }\n        setScreenShare(!isScreenShare);\n      } catch (err) {\n        console.error(\"[Error] Unable to share the screen\", err);\n      }\n    });\n  }\n\n  function hangUp() {\n    if (canJoinMeeting) {\n      if (localMediaStream !== undefined) {\n        localMediaStream.getVideoTracks()[0].enabled =\n          !localMediaStream.getVideoTracks()[0].enabled;\n      }\n      socket.disconnect();\n      if (typeof window !== \"undefined\") {\n        window.location.href = \"/\";\n      }\n    }\n  }\n\n  async function raiseHand() {\n    if (canJoinMeeting) {\n      setHandRaised((handRaised) => {\n        console.log(\"handRaisedref\", handRaised);\n        enqueueSnackbar(`${handRaised ? \"Hand Raised \" : \"Hand Down \"}`, {\n          anchorOrigin: {\n            vertical: \"top\",\n            horizontal: \"right\",\n          },\n        });\n\n        if (handRaised) {\n          raisedHandSound.play();\n        }\n        socket.emit(\"peerActionStatus\", {\n          room_id: meetId,\n          socket_id: socket.id,\n          element: \"hand\",\n          status: !handRaised,\n        } as PeerActionStatusConfig);\n\n        return !handRaised;\n      });\n    }\n  }\n\n  function onInputChangeName(\n    e: React.ChangeEvent<HTMLInputElement>,\n    callback?: (value: string) => void\n  ) {\n    const sanitizedText = escape(e.target.value);\n    socket.emit(\"peerActionStatus\", {\n      room_id: meetId,\n      socket_id: socket.id,\n      element: \"name\",\n      status: `${sanitizedText}`,\n    } as PeerActionStatusConfig);\n    if (callback && typeof callback === \"function\") callback(sanitizedText);\n  }\n\n  function addPeer(peer: PeersType) {\n    dispatch(addPeerAction(peer));\n  }\n  function editPeer(peer: PeersType) {\n    dispatch(editPeerAction(peer));\n  }\n  function deletePeer(peer: PeersType) {\n    dispatch(removePeerAction(peer));\n  }\n\n  return {\n    camera,\n    mic,\n    handRaised,\n    screenShare,\n    localMediaStream,\n    peers,\n    streamError,\n    toggleMic,\n    toggleCamera,\n    hangUp,\n    raiseHand,\n    onInputChangeName,\n    addPeer,\n    editPeer,\n    isScreenRecord,\n    deletePeer,\n    setPeers,\n    iceServers,\n    setStreamError,\n    getTurnServerQuery,\n    toggleRecordStream,\n    toggleScreenSharing,\n  };\n}\n\nexport default useMeeting;\n","import React from \"react\";\nimport { createPortal } from \"react-dom\";\n\nexport default function ScreenRecorderContainer() {\n  return (\n    <section>\n      {createPortal(\n        <section>\n          {\" \"}\n          <div className=\"recording__container\">\n            <div className=\"recording__circle\"></div>\n            <div className=\"recording__text\">Recording</div>\n          </div>\n        </section>,\n        document.body\n      )}\n    </section>\n  );\n}\n","import { Container, Icon } from \"@mui/material\";\nimport React, { useRef, useEffect, useState } from \"react\";\nimport { useFormik } from \"formik\";\nimport * as yup from \"yup\";\nimport { useParams } from \"react-router-dom\";\nimport { useSnackbar } from \"notistack\";\nimport { Icon as Iconify } from \"@iconify/react\";\n\nimport AppHeader from \"AppHeader\";\nimport VideoPreviewer from \"common/VideoPreviewer\";\nimport { getPeerInfo, addPeerSignal, createPeer } from \"./VideoMeetCommon\";\nimport VideoMeetJoinVideoPreviewerBody from \"./VideoMeetJoinVideoPreviewerBody\";\nimport VideoMeetJoinVideoPreviewerHeader from \"./VideoMeetJoinVideoPreviewerHeader\";\nimport VideoMeetJoinVideoPreviewerFooter from \"./VideoMeetJoinVideoPreviewerFooter\";\nimport VideoMeet from \"./VideoMeet\";\nimport LoadingContent from \"common/LoadingContent\";\nimport VideoMeetJoinForm from \"./VideoMeetJoinForm\";\nimport { genderToPronoun } from \"utils/GLobalUtils\";\nimport usePlaySound from \"hooks/usePlaySound\";\nimport { socket } from \"utils/VideoUtils\";\nimport useMeeting from \"hooks/useMeeting\";\nimport fastmeetApi from \"store/StoreQuerySlice\";\nimport {\n  PeersType,\n  UserObjType,\n  UserJoinedPayloadType,\n  PeersRefType,\n  PeerActionStatusConfig,\n} from \"./VideoMeetType\";\nimport ScreenRecorderContainer from \"common/ScreenRecorderContainer\";\n\nexport default function VideoMeetJoin() {\n  const { meetId } = useParams();\n  const { enqueueSnackbar } = useSnackbar();\n\n  const peersRef: { current: any } = useRef([]);\n  const screenRecordRef: { current: any } = useRef<boolean>(false);\n\n  const [canJoinMeeting, setCanJoinMeeting] = useState<boolean>(false);\n\n  const addPeerSound = usePlaySound(\"addPeer\");\n  const raisedHandSound = usePlaySound(\"raiseHand\");\n  const onlyParticipantSound = usePlaySound(\"onlyParticipant\");\n  const screenShareSound = usePlaySound(\"newMessage\");\n  const screenRecStartSound = usePlaySound(\"recStart\");\n  const screenRecStopSound = usePlaySound(\"recStop\");\n\n  const {\n    localMediaStream,\n    handRaised,\n    streamError,\n    mic,\n    peers,\n    setPeers,\n    camera,\n    screenShare,\n    toggleCamera,\n    toggleRecordStream,\n    isScreenRecord,\n    toggleMic,\n    hangUp,\n    raiseHand,\n    iceServers,\n    setStreamError,\n    onInputChangeName,\n    getTurnServerQuery,\n    toggleScreenSharing,\n  } = useMeeting(meetId, { canJoinMeeting });\n\n  const formik = useFormik({\n    initialValues: {\n      name: \"\",\n      gender: \"male\",\n      meetId,\n    },\n    enableReinitialize: true,\n    validationSchema: yup.object({\n      name: yup.string().label(\"Full Name\").required(\"Required\"),\n      gender: yup.string().label(\"Full Name\").required(\"Required\"),\n    }),\n    onSubmit: (values) => {\n      setCanJoinMeeting(true);\n    },\n  });\n\n  const getAvatarQuery = fastmeetApi.useGetAvatarQuery({\n    category: formik.values.gender,\n  });\n\n  const getAvatarResult = getAvatarQuery.data as { data: string };\n\n  /**\n   * join to channel and send some peer info\n   * @param stream MediaStream\n   */\n  function joinToChannel(stream: MediaStream) {\n    if (peers.length === 0) {\n      socket.emit(\"join\", meetId, {\n        userAgent: navigator.userAgent.toLowerCase(),\n        channel_password: \"\",\n        avatar: getAvatarResult?.data,\n        peer_info: getPeerInfo(),\n        peer_name: formik.values.name,\n        peer_gender: formik.values.gender,\n        peer_video: camera,\n        peer_audio: mic,\n        peer_raised_hand: handRaised,\n        peer_screen_record: screenRecordRef.current,\n        peer_screen_share: screenShare,\n      });\n    }\n\n    socket.on(\"clients-in-room\", (users: UserObjType[]) => {\n      const peers: PeersType[] = [];\n      // To all users who are already in the room initiating a peer connection\n      users.forEach((user: UserObjType) => {\n        if (iceServers !== undefined) {\n          const peer = createPeer(\n            user.socketId,\n            socket.id,\n            stream,\n            iceServers,\n            socket\n          );\n          addPeerSound.play();\n          peers.push({\n            peerId: user.socketId,\n            peerObj: peer,\n            userObj: user,\n          });\n        }\n      });\n\n      if (peers.length >= 1) {\n        onlyParticipantSound.pause();\n        onlyParticipantSound.currentTime = 0;\n        onlyParticipantSound.loop = false;\n      } else {\n        onlyParticipantSound.play();\n        onlyParticipantSound.loop = true;\n      }\n      peersRef.current = peers;\n      setPeers(peers);\n    });\n\n    /**\n     * once the users initiate signal we will call add peer\n     * to acknowledge the signal and send the stream\n     */\n    socket.on(\"user-joined\", (payload: UserJoinedPayloadType) => {\n      if (iceServers !== undefined) {\n        const peer = addPeerSignal(\n          payload.signal,\n          payload.callerId,\n          stream,\n          iceServers,\n          socket\n        );\n        peersRef.current.push({\n          peerId: payload.callerId,\n          peerObj: peer,\n          userObj: payload.user,\n        });\n        setPeers((peers: PeersType[]) => {\n          const users = [...peers];\n\n          const newUserIndex = users.findIndex(\n            (user) => user.peerId === payload.callerId\n          );\n          if (newUserIndex !== undefined) {\n            users[newUserIndex] = {\n              peerId: payload.callerId,\n              peerObj: peer,\n              userObj: payload.user,\n            };\n            return users;\n          } else {\n            return [\n              ...users,\n              {\n                peerId: payload.callerId,\n                peerObj: peer,\n                userObj: payload.user,\n              },\n            ];\n          }\n        });\n\n        if (peersRef.current.length >= 1) {\n          onlyParticipantSound.pause();\n          onlyParticipantSound.currentTime = 0;\n          onlyParticipantSound.loop = false;\n        }\n\n        addPeerSound.play();\n        enqueueSnackbar(\n          <>\n            <img\n              src={payload.user.avatar}\n              alt={payload.user?.peer_name}\n              className=\"w-full max-w-[50px] capitalize\"\n            />{\" \"}\n            {payload.user?.peer_name} joined meeting\n          </>,\n          {\n            anchorOrigin: {\n              vertical: \"top\",\n              horizontal: \"center\",\n            },\n          }\n        );\n      }\n    });\n\n    /**\n     *  once the signal is accepted calling the signal with signal\n     *from other user so that stream can flow between peers\n     */\n    socket.on(\"signal-accepted\", (payload: { signal: any; id: string }) => {\n      const item: PeersRefType = peersRef.current.find(\n        (peer: PeersType) => peer.peerId === payload.id\n      );\n      item.peerObj.signal(payload.signal);\n    });\n\n    /**\n     * if some user is disconnected removing his references.\n     */\n    socket.on(\"userDisconnected\", (payload: { socketId: string }) => {\n      const item: PeersType = peersRef.current.find(\n        (peer: PeersType) => peer.peerId === payload.socketId\n      );\n      // destroy peer\n      if (item) {\n        item.peerObj.destroy();\n      }\n\n      // removing the peer from the arrays and storing remaining peers in new array\n      const peers = peersRef.current.filter(\n        (peer: PeersType) => peer.peerId !== payload.socketId\n      );\n\n      if (peers.length >= 1) {\n        onlyParticipantSound.pause();\n        onlyParticipantSound.currentTime = 0;\n        onlyParticipantSound.loop = false;\n      } else {\n        onlyParticipantSound.play();\n        onlyParticipantSound.loop = true;\n      }\n\n      enqueueSnackbar(`${item.userObj.peer_name} Left meeting`, {\n        anchorOrigin: {\n          vertical: \"bottom\",\n          horizontal: \"left\",\n        },\n      });\n\n      peersRef.current = peers;\n      setPeers(peers);\n    });\n\n    /**\n     * Relay peer actions\n     */\n    socket.on(\"peerActionStatus\", (payload: PeerActionStatusConfig) => {\n      console.log(\"peerActionStatus\", payload);\n      setPeers((peers: PeersType[]) => {\n        const peerIndex = peers.findIndex(\n          (peer: PeersType) => peer.peerId === payload.socket_id\n        );\n        const newPeer: PeersType[] = [...peers];\n\n        const peerItem: PeersType = newPeer[peerIndex];\n\n        if (peerItem) {\n          switch (payload.element) {\n            case \"video\":\n              peerItem.userObj.peer_video = payload.status as boolean;\n              break;\n            case \"audio\":\n              peerItem.userObj.peer_audio = payload.status as boolean;\n              break;\n            case \"screen\":\n              peerItem.userObj.peer_screen_share = payload.status as boolean;\n              screenShareSound.play();\n              enqueueSnackbar(\n                <>\n                  {peerItem.userObj.peer_name} `$\n                  {payload.status ? \"Started\" : \"Stopped\"}`Sharing Screen\n                </>,\n                {\n                  anchorOrigin: {\n                    vertical: \"top\",\n                    horizontal: \"right\",\n                  },\n                }\n              );\n\n              break;\n            case \"hand\":\n              peerItem.userObj.peer_raised_hand = payload.status as boolean;\n              if (peerItem.userObj.peer_raised_hand) {\n                raisedHandSound.play();\n                enqueueSnackbar(\n                  <>\n                    {peerItem.userObj.peer_name} Raised{\" \"}\n                    {genderToPronoun(peerItem.userObj.peer_gender)} Hand{\" \"}\n                    <Icon className=\"wave-hand\">\n                      <Iconify\n                        icon={`emojione:waving-hand-medium-dark-skin-tone`}\n                      />\n                    </Icon>\n                  </>,\n                  {\n                    anchorOrigin: {\n                      vertical: \"top\",\n                      horizontal: \"right\",\n                    },\n                  }\n                );\n              }\n              break;\n            case \"rec\":\n              peerItem.userObj.peer_screen_record = payload.status as boolean;\n              if (peerItem.userObj.peer_screen_record) {\n                screenRecStartSound.play();\n                enqueueSnackbar(\n                  <>{peerItem.userObj.peer_name} started  REC</>,\n                  {\n                    anchorOrigin: {\n                      vertical: \"top\",\n                      horizontal: \"right\",\n                    },\n                  }\n                );\n              } else {\n                screenRecStopSound.play();\n                enqueueSnackbar(\n                  <>{peerItem.userObj.peer_name} stopped  REC</>,\n                  {\n                    anchorOrigin: {\n                      vertical: \"top\",\n                      horizontal: \"right\",\n                    },\n                  }\n                );\n              }\n              break;\n            case \"name\":\n              peerItem.userObj.peer_name = payload.status as string;\n              break;\n          }\n        }\n        peersRef.current = newPeer;\n        console.log(\"newPeer\", newPeer);\n        return newPeer;\n      });\n    });\n  }\n\n  useEffect(() => {\n    if (\n      canJoinMeeting &&\n      localMediaStream !== undefined &&\n      iceServers !== undefined\n    ) {\n      joinToChannel(localMediaStream);\n    }\n    // eslint-disable-next-line\n  }, [canJoinMeeting]);\n\n  useEffect(() => {\n    return () => {\n      onlyParticipantSound.pause();\n    };\n  }, []);\n\n  if (canJoinMeeting) {\n    return (\n      <>\n        <LoadingContent\n          loading={getTurnServerQuery.isLoading || getAvatarQuery.isLoading}\n          error={!!getTurnServerQuery.error || !!getAvatarQuery.error}\n        >\n          <>\n            {isScreenRecord ? <ScreenRecorderContainer /> : null}\n            <VideoMeet\n              {...{\n                camera,\n                mic,\n                toggleCamera,\n                raiseHand,\n                hangUp,\n                formik,\n                peers,\n                isScreenRecord,\n                localMediaStream,\n                getAvatarQuery,\n                screenShare,\n                toggleRecordStream,\n                toggleScreenSharing,\n                hand: handRaised,\n                toggleAudio: toggleMic,\n                onInputName: onInputChangeName,\n              }}\n            />\n          </>\n        </LoadingContent>\n      </>\n    );\n  }\n\n  return (\n    <div className=\"bg-gray-100  min-h-screen\">\n      <AppHeader />\n      <LoadingContent\n        loading={getTurnServerQuery.isLoading}\n        error={!!getTurnServerQuery.error}\n      >\n        <Container maxWidth=\"xl\" className=\"flex min-h-screen items-center\">\n          <div className=\"grid grid-cols-1 md:grid-cols-3 gap-10 w-full\">\n            <VideoMeetJoinForm formik={formik} />\n            <div className=\"col-span-2 -order-1 md:order-1 h-[450px]\">\n              <VideoPreviewer\n                camera={camera}\n                mic={mic}\n                muted={true}\n                active={true}\n                srcObject={localMediaStream}\n                header={\n                  <VideoMeetJoinVideoPreviewerHeader\n                    localMediaStream={localMediaStream}\n                  />\n                }\n                body={\n                  <VideoMeetJoinVideoPreviewerBody streamError={streamError} />\n                }\n                footer={\n                  <VideoMeetJoinVideoPreviewerFooter\n                    camera={camera}\n                    toggleCamera={() => {\n                      toggleCamera((camera) => {\n                        camera\n                          ? setStreamError(\"\")\n                          : setStreamError(\"Camera is turned off\");\n                      });\n                    }}\n                    mic={mic}\n                    toggleAudio={toggleMic}\n                  />\n                }\n              />\n            </div>\n          </div>\n        </Container>\n      </LoadingContent>\n    </div>\n  );\n}\n","import DetectRTC from \"detectrtc\";\nimport Peer from \"simple-peer\";\nimport { Socket } from \"socket.io-client\";\n\n/**\n * Toggle Audio on/off\n * @param {MediaStream} localMediaStream media stream\n * @param {Function} setter setter hooks setState\n * @param {Function} callback callback function\n */\nexport const toggleAudio = (\n  localMediaStream: MediaStream | undefined,\n  setter: (e: boolean) => void,\n  callback?: (camera: boolean) => void\n) => {\n  // https://developer.mozilla.org/en-US/docs/Web/API/MediaStream/getAudioTracks\n  if (localMediaStream !== undefined) {\n    localMediaStream.getAudioTracks()[0].enabled =\n      !localMediaStream.getAudioTracks()[0].enabled;\n    setter(localMediaStream.getAudioTracks()[0].enabled);\n    callback !== undefined &&\n      callback(localMediaStream.getAudioTracks()[0].enabled);\n  }\n};\n\n/**\n * Toggle video on/off\n * @param {MediaStream} localMediaStream media stream\n * @param {Function} setter setter hooks setState\n * @param {Function} callback callback function\n */\nexport const toggleCamera = (\n  localMediaStream: MediaStream | undefined,\n  setter: (e: boolean) => void,\n  callback?: (camera: boolean) => void\n) => {\n  // https://developer.mozilla.org/en-US/docs/Web/API/MediaStream/getVideoTracks\n  if (localMediaStream !== undefined) {\n    localMediaStream.getVideoTracks()[0].enabled =\n      !localMediaStream.getVideoTracks()[0].enabled;\n    setter(localMediaStream.getVideoTracks()[0].enabled);\n    callback !== undefined &&\n      callback(localMediaStream.getVideoTracks()[0].enabled);\n  }\n};\n\n/**\n *\n * @param {MediaStream | undefined} localMediaStream media stream\n */\nexport function hangUp(localMediaStream: MediaStream | undefined) {\n  if (localMediaStream !== undefined) {\n    localMediaStream.getVideoTracks()[0].enabled = false;\n  }\n}\n\n/**\n * Get peer info using DetecRTC\n * https://github.com/muaz-khan/DetectRTC\n * @returns {object} peer info\n */\nexport function getPeerInfo() {\n  return {\n    detectRTCversion: DetectRTC.version,\n    isWebRTCSupported: DetectRTC.isWebRTCSupported,\n    // isDesktopDevice: !DetectRTC.isMobileDevice && !isTabletDevice && !isIPadDevice,\n    isMobileDevice: DetectRTC.isMobileDevice,\n    osName: DetectRTC.osName,\n    osVersion: DetectRTC.osVersion,\n    browserName: DetectRTC.browser.name,\n    browserVersion: DetectRTC.browser.version,\n  };\n}\n\n/**\n * Create Peer\n * @param {string} userToSignal\n * @param {string} callerId\n * @param {MediaStream} stream\n * @param {object} iceServers\n * @param socket\n * @returns peer\n */\nexport function createPeer(\n  userToSignal: string,\n  callerId: string,\n  stream: MediaStream,\n  iceServers: RTCIceServer[],\n  socket: Socket\n) {\n  const peer = new Peer({\n    initiator: true,\n    trickle: false,\n    stream,\n    config: {\n      iceServers: iceServers,\n    },\n  });\n\n  console.log(\"peer\", peer);\n\n  peer.on(\"signal\", (signal) => {\n    socket.emit(\"initiate-signal\", {\n      userToSignal,\n      callerId,\n      signal,\n    });\n  });\n\n  return peer;\n}\n\n/**\n * Add peer peer to signal\n * @param {string} incomingSignal\n * @param {string} callerId\n * @param {MediaStream} stream\n * @param {object} iceServers\n * @param {Socket} socket\n * @returns peer\n */\nexport function addPeerSignal(\n  incomingSignal: string,\n  callerId: string,\n  stream: MediaStream,\n  iceServers: RTCIceServer[],\n  socket: Socket\n) {\n  const peer = new Peer({\n    initiator: false,\n    trickle: false,\n    stream,\n    config: {\n      iceServers: iceServers,\n    },\n  });\n\n  peer.on(\"signal\", (signal) => {\n    // Aknowledge signal and accept offer\n    socket.emit(\"acknowledge-signal\", { signal, callerId });\n  });\n\n  peer.signal(incomingSignal);\n\n  return peer;\n}\n"],"names":["_path","_path2","_excluded","_extends","Object","assign","bind","target","i","arguments","length","source","key","prototype","hasOwnProperty","call","apply","this","_objectWithoutProperties","excluded","sourceKeys","keys","indexOf","_objectWithoutPropertiesLoose","getOwnPropertySymbols","sourceSymbolKeys","propertyIsEnumerable","SvgLogo","_ref","svgRef","title","titleId","props","width","height","viewBox","fill","xmlns","ref","id","d","ForwardRef","AppBar","color","elevation","Container","maxWidth","Toolbar","disableGutters","to","RouteEnum","className","Typography","format","Date","Tooltip","IconButton","Icon","Video","srcObject","muted","peer","refVideo","useRef","useEffect","current","autoplay","on","stream","playsInline","autoPlay","VideoPreviewer","pin","name","camera","active","mic","avatar","header","footer","body","rest","style","display","src","alt","VideoMeetJoinVideoPreviewerBody","streamError","sx","fontSize","icon","variant","VideoMeetSettingsActionModal","open","handleClose","localMediaStream","useState","audioInputSelect","setAudioInputSelect","audioOutputSelect","setAudioOutputSelect","videoSelect","setVideoSelect","addUpdateDevice","prev","deviceInfo","newDeviceInfo","deviceIndex","findIndex","device","deviceId","label","kind","push","gotDevices","deviceInfos","forEach","console","log","navigator","mediaDevices","enumerateDevices","then","catch","error","message","Dialog","onClose","fullWidth","DialogTitle","DialogContent","TextField","select","map","audioInput","MenuItem","value","audioOutput","videoInput","DialogActions","Button","onClick","VideoMeetJoinVideoPreviewerHeader","openVideoSettings","setOpenVideoSettings","videoSettingsActions","action","popupId","popupState","Fab","bindToggle","Popper","bindPopper","zIndex","transition","TransitionProps","Fade","timeout","Paper","setting","index","VideoMeetJoinVideoPreviewerFooter","toggleCamera","toggleAudio","PreviewInput","styled","InputBase","theme","position","backgroundColor","border","padding","VideoMeet","raiseHand","hangUp","toggleScreenSharing","hand","toggleRecordStream","isScreenRecord","screenShare","peers","formik","getAvatarQuery","onInputName","mainActions","useMemo","size","onChangePreviewName","e","setFieldValue","values","data","ThemeConfig","placement","onChange","userObj","peer_video","peer_audio","peerObj","peer_name","peer_raised_hand","fontWeight","ErrorContent","description","onTryAgain","clsx","defaultProps","LoadingContent","loading","children","onReload","onMount","loadingContent","errorContent","dataRef","useDataRef","undefined","defaultLoadingContent","LoadingIndicator","defaultErrorContent","VideoMeetJoinForm","onSubmit","handleSubmit","placeholder","getFieldProps","touched","Boolean","errors","helperText","RadioGroup","row","FormControlLabel","control","Radio","type","genderToPronoun","gender","usePlaySound","React","Audio","BASE_URL","useExtendedState","initialState","state","setState","Promise","resolve","reject","s","meetId","canJoinMeeting","globalState","useSelector","global","enqueueSnackbar","useSnackbar","dispatch","useDispatch","setPeers","setStreamError","setLocalMediaStream","handRaised","setHandRaised","setScreenShare","getScreenShare","setMediaRecorder","getMediaRecorder","setIsScreenRecord","getIsScreenRecord","setRecordedBlobs","getRecordedBlobs","iceServers","raisedHandSound","screenRecStartSound","screenRecStopSound","getTurnServerQuery","fastmeetApi","callback","getVideoTracks","enabled","toggleCameraAction","socket","room_id","socket_id","element","status","anchorOrigin","vertical","horizontal","getAudioTracks","toggleMicAction","downloadRecordedStream","recordedBlobs","includes","blob","Blob","recFileName","date","toISOString","split","time","toTimeString","getDataTimeString","file","url","window","URL","createObjectURL","a","document","createElement","href","download","appendChild","click","setTimeout","removeChild","revokeObjectURL","saveBlobToFile","err","handleMediaRecorderStop","event","play","handleMediaRecorderData","prevRecordedBlobs","handleMediaRecorder","mediaRecorder","start","addEventListener","startStreamRecording","mimeoptions","filter","mimeType","MediaRecorder","isTypeSupported","options","getDisplayMedia","video","screenStream","newStream","MediaStream","refreshMyLocalStream","localAudioTrackChange","isScreenShare","onended","replaceVideoTrack","recipientPeer","replaceTrack","streams","constraints","audio","echoCancellation","noiseSuppression","sampleRate","cursor","screenMediaPromise","getUserMedia","newPeers","initEnumerateDevices","toggleMic","location","onInputChangeName","sanitizedText","escape","addPeer","addPeerAction","editPeer","editPeerAction","deletePeer","removePeerAction","isStreamRecording","stop","ScreenRecorderContainer","createPortal","VideoMeetJoin","useParams","peersRef","screenRecordRef","setCanJoinMeeting","addPeerSound","onlyParticipantSound","screenShareSound","useMeeting","useFormik","initialValues","enableReinitialize","validationSchema","yup","required","category","getAvatarResult","joinToChannel","userAgent","toLowerCase","channel_password","peer_info","detectRTCversion","DetectRTC","isWebRTCSupported","isMobileDevice","osName","osVersion","browserName","browserVersion","peer_gender","peer_screen_record","peer_screen_share","users","user","userToSignal","callerId","Peer","initiator","trickle","config","signal","emit","createPeer","socketId","peerId","pause","currentTime","loop","payload","incomingSignal","addPeerSignal","newUserIndex","find","item","destroy","peerIndex","newPeer","peerItem","isLoading","AppHeader"],"sourceRoot":""}